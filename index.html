<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sound Bear - Èü≥Â£∞‰ΩúÂìÅÂà∂‰Ωú„ÉÑ„Éº„É´</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="responsive.css">
    <link rel="stylesheet" href="mobile.css">
    <link rel="stylesheet" href="effects-collapse.css">
</head>
<body>
    <div id="app">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="app-header">
            <div class="header-left">
                <h1 class="app-title">
                    <img src="user-icon.png" alt="üêª" class="app-icon">
                    Sound Bear
                </h1>
                <div class="project-info">
                    <input type="text" id="projectName" class="project-name-input" value="Êñ∞Ë¶è„Éó„É≠„Ç∏„Çß„ÇØ„Éà" title="„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶Á∑®ÈõÜ">
                </div>
            </div>
            <div class="header-controls">
                <button class="btn btn-secondary history-btn" id="undoBtn" disabled title="ÂÖÉ„Å´Êàª„Åô (Ctrl/Cmd+Z)">
                    <img src="undo.png" alt="ÂÖÉ„Å´Êàª„Åô" class="history-icon">
                </button>
                <button class="btn btn-secondary history-btn" id="redoBtn" disabled title="„ÇÑ„ÇäÁõ¥„Åô (Ctrl/Cmd+Y)">
                    <img src="redo.png" alt="„ÇÑ„ÇäÁõ¥„Åô" class="history-icon">
                </button>
                <button class="btn btn-primary" id="newProjectBtn">Êñ∞Ë¶è</button>
                <button class="btn btn-primary" id="saveProjectBtn">‰øùÂ≠ò</button>
                <button class="btn btn-primary" id="loadProjectBtn">Ë™≠Ëæº</button>
                <button class="btn btn-success" id="exportBtn">Êõ∏„ÅçÂá∫„Åó</button>
            </div>
        </header>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <div class="main-container">
            <!-- „Çµ„Ç§„Éâ„Éê„ÉºÔºà„Éï„Ç°„Ç§„É´„Éñ„É©„Ç¶„Ç∂Ôºâ -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <img src="gorone-bear.png" alt="üêª" class="sidebar-bear">
                    <button class="btn btn-primary btn-icon" id="deleteFilesBtn" title="ÈÅ∏Êäû„Åó„Åü„Éï„Ç°„Ç§„É´„ÇíÂâäÈô§">-</button>
                    <button class="btn btn-primary btn-icon" id="importFilesBtn">+</button>
                </div>
                <div class="file-tabs">
                    <button class="tab-btn active" data-tab="dialogue">Âè∞Ë©û</button>
                    <button class="tab-btn" data-tab="sfx">SE</button>
                    <button class="tab-btn" data-tab="bgm">BGM</button>
                    <button class="tab-btn" data-tab="ambience">ME</button>
                    <button class="tab-btn" data-tab="effects">„Åù„ÅÆ‰ªñ</button>
                </div>
                <div class="file-list-container">
                    <div class="file-list active" id="dialogue-list"></div>
                    <div class="file-list" id="sfx-list"></div>
                    <div class="file-list" id="bgm-list"></div>
                    <div class="file-list" id="ambience-list"></div>
                    <div class="file-list" id="effects-list"></div>
                </div>
            </aside>

            <!-- „Çø„Ç§„É†„É©„Ç§„É≥„Ç®„É™„Ç¢ -->
            <main class="timeline-container">
                <!-- „Éà„É©„É≥„Çπ„Éù„Éº„Éà„Ç≥„É≥„Éà„É≠„Éº„É´ -->
                <div class="transport-controls">
                    <button class="transport-btn" id="playBtn">
                        <img src="play.png" alt="ÂÜçÁîü" class="transport-icon">
                    </button>
                    <button class="transport-btn" id="pauseBtn">
                        <img src="pause.png" alt="‰∏ÄÊôÇÂÅúÊ≠¢" class="transport-icon">
                    </button>
                    <button class="transport-btn" id="stopBtn">
                        <img src="stop.png" alt="ÂÅúÊ≠¢" class="transport-icon">
                    </button>
                    <div class="time-display">
                        <span id="currentTime">00:00.000</span>
                        <span>/</span>
                        <span id="totalTime">00:00.000</span>
                    </div>
                    <div class="zoom-controls">
                        <button class="btn btn-small" id="zoomInBtn">+</button>
                        <button class="btn btn-small" id="zoomOutBtn">-</button>
                        <button class="btn btn-small" id="fitBtn">ÂÖ®‰Ωì</button>
                    </div>
                </div>

                <!-- „Çø„Ç§„É†„É©„Ç§„É≥ -->
                <div class="timeline-area" id="timelineArea">
                    <div class="timeline-header">
                        <div class="track-header-column">„Éà„É©„ÉÉ„ÇØ</div>
                        <div class="timeline-ruler" id="timelineRuler"></div>
                    </div>
                    <div class="tracks-container" id="tracksContainer">
                        <!-- „Éà„É©„ÉÉ„ÇØ„ÅåÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Çã -->
                    </div>
                </div>

                <!-- „Éà„É©„ÉÉ„ÇØËøΩÂä†„Éú„Çø„É≥ -->
                <div class="track-actions">
                    <button class="btn btn-primary" id="addTrackBtn">+ „Éà„É©„ÉÉ„ÇØËøΩÂä†</button>
                    <span class="track-count">„Éà„É©„ÉÉ„ÇØÊï∞: <span id="trackCount">0</span>/30</span>
                </div>
            </main>

            <!-- „Ç®„Éï„Çß„ÇØ„Éà„Éë„Éç„É´ -->
            <aside class="effects-panel" id="effectsPanel">
                <div class="panel-header">
                    <h2>üéõÔ∏è „Ç®„Éï„Çß„ÇØ„Éà</h2>
                    <button class="btn-close" id="closeEffectsBtn">‚úï</button>
                </div>
                <div class="effects-content">
                    <div class="effect-section">
                        <h3>„Ç§„Ç≥„É©„Ç§„Ç∂„Éº</h3>
                        <div class="eq-controls">
                            <div class="control-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="trackEQEnabled">
                                    <span>„Ç§„Ç≥„É©„Ç§„Ç∂„Éº„ÇíÊúâÂäπÂåñ</span>
                                </label>
                            </div>
                            <div class="eq-presets">
                                <button class="btn btn-small eq-preset-btn" data-preset="flat" disabled>„Éï„É©„ÉÉ„Éà</button>
                                <button class="btn btn-small eq-preset-btn" data-preset="phone" disabled>ÈõªË©±È¢®</button>
                                <button class="btn btn-small eq-preset-btn" data-preset="clear" disabled>„ÇØ„É™„Ç¢</button>
                                <button class="btn btn-small eq-preset-btn" data-preset="wall" disabled>Â£ÅË∂ä„Åó</button>
                            </div>
                            <div class="control-row">
                                <label>Low (100Hz)</label>
                                <input type="range" id="eqLow" min="-24" max="24" value="0" step="0.1" disabled>
                                <span class="control-value">0.0 dB</span>
                            </div>
                            <div class="control-row">
                                <label>Mid (1kHz)</label>
                                <input type="range" id="eqMid" min="-24" max="24" value="0" step="0.1" disabled>
                                <span class="control-value">0.0 dB</span>
                            </div>
                            <div class="control-row">
                                <label>High (10kHz)</label>
                                <input type="range" id="eqHigh" min="-24" max="24" value="0" step="0.1" disabled>
                                <span class="control-value">0.0 dB</span>
                            </div>
                        </div>
                    </div>
                    <div class="effect-section">
                        <h3>„É™„Éü„ÉÉ„Çø„Éº</h3>
                        <div class="limiter-controls">
                            <div class="control-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="trackLimiterEnabled">
                                    <span>„É™„Éü„ÉÉ„Çø„Éº„ÇíÊúâÂäπÂåñ</span>
                                </label>
                            </div>
                            <div class="control-row">
                                <label>Threshold</label>
                                <input type="range" id="trackLimiterThreshold" min="-24" max="0" value="-6" step="0.1" disabled>
                                <span class="control-value">-6 dB</span>
                            </div>
                            <div class="control-row">
                                <label>Release</label>
                                <input type="range" id="trackLimiterRelease" min="10" max="1000" value="250" step="10" disabled>
                                <span class="control-value">250 ms</span>
                            </div>
                            <div class="control-row">
                                <label>Ratio</label>
                                <input type="range" id="trackLimiterRatio" min="1" max="20" value="20" step="0.1" disabled>
                                <span class="control-value">20:1</span>
                            </div>
                        </div>
                    </div>
                    <div class="effect-section">
                        <h3>„Éõ„ÉØ„Ç§„Éà„Éé„Ç§„Ç∫Èô§Âéª</h3>
                        <div class="expander-controls">
                            <div class="control-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="trackExpanderEnabled">
                                    <span>„Éõ„ÉØ„Ç§„Éà„Éé„Ç§„Ç∫Èô§Âéª„ÇíÊúâÂäπÂåñ</span>
                                </label>
                            </div>
                            <div class="control-row">
                                <label>ThresholdÔºàÈñæÂÄ§Ôºâ</label>
                                <input type="range" id="trackExpanderThreshold" min="-60" max="-20" value="-40" step="1" disabled>
                                <span class="control-value">-40 dB</span>
                            </div>
                            <div class="control-row">
                                <label>RatioÔºàÊØîÁéáÔºâ</label>
                                <input type="range" id="trackExpanderRatio" min="0.1" max="1" value="0.5" step="0.05" disabled>
                                <span class="control-value">0.50</span>
                            </div>
                            <div class="control-row">
                                <label>Release</label>
                                <input type="range" id="trackExpanderRelease" min="50" max="500" value="250" step="10" disabled>
                                <span class="control-value">250 ms</span>
                            </div>
                            <div class="expander-info">
                                üí° „Ç≤„Ç§„É≥„Çí‰∏ä„Åí„ÅüÈü≥Â£∞„ÅÆ"„Çµ„Éº"„Å®„ÅÑ„ÅÜ„Éé„Ç§„Ç∫„ÇíËªΩÊ∏õ<br>
                                üí° Threshold‰ª•‰∏ã„ÅÆÂ∞è„Åï„ÅÑÈü≥„Çí„Åï„Çâ„Å´Â∞è„Åï„Åè„Åó„Åæ„Åô<br>
                                üí° Ratio„ÅåÂ∞è„Åï„ÅÑ„Åª„Å©Âº∑Âäõ„Å™ÂäπÊûú
                            </div>
                        </div>
                    </div>
                    <div class="effect-section">
                        <h3>Â∏ØÂüü„Ç´„ÉÉ„Éà</h3>
                        <div class="noisereduction-controls">
                            <div class="control-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="trackNoiseReductionEnabled">
                                    <span>Â∏ØÂüü„Ç´„ÉÉ„Éà„ÇíÊúâÂäπÂåñ</span>
                                </label>
                            </div>
                            
                            <!-- „Éè„Ç§„Éë„Çπ„Éï„Ç£„É´„Çø -->
                            <div class="filter-subsection">
                                <h4>üîâ „Éè„Ç§„Éë„Çπ„Éï„Ç£„É´„ÇøÔºà‰ΩéÈü≥„Ç´„ÉÉ„ÉàÔºâ</h4>
                                <div class="control-row">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="trackHighpassEnabled">
                                        <span>ÊúâÂäπÂåñ</span>
                                    </label>
                                </div>
                                <div class="control-row">
                                    <label>„Ç´„ÉÉ„Éà„Ç™„ÉïÂë®Ê≥¢Êï∞</label>
                                    <input type="range" id="trackHighpassCutoff" min="20" max="500" value="80" step="5" disabled>
                                    <span class="control-value">80 Hz</span>
                                </div>
                                <div class="control-row">
                                    <label>„É¨„Çæ„Éä„É≥„Çπ (Q)</label>
                                    <input type="range" id="trackHighpassResonance" min="0.1" max="10" value="0.7" step="0.1" disabled>
                                    <span class="control-value">0.7</span>
                                </div>
                            </div>
                            
                            <!-- „É≠„Éº„Éë„Çπ„Éï„Ç£„É´„Çø -->
                            <div class="filter-subsection">
                                <h4>üîä „É≠„Éº„Éë„Çπ„Éï„Ç£„É´„ÇøÔºàÈ´òÈü≥„Ç´„ÉÉ„ÉàÔºâ</h4>
                                <div class="control-row">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="trackLowpassEnabled">
                                        <span>ÊúâÂäπÂåñ</span>
                                    </label>
                                </div>
                                <div class="control-row">
                                    <label>„Ç´„ÉÉ„Éà„Ç™„ÉïÂë®Ê≥¢Êï∞</label>
                                    <input type="range" id="trackLowpassCutoff" min="1000" max="20000" value="8000" step="100" disabled>
                                    <span class="control-value">8000 Hz</span>
                                </div>
                                <div class="control-row">
                                    <label>„É¨„Çæ„Éä„É≥„Çπ (Q)</label>
                                    <input type="range" id="trackLowpassResonance" min="0.1" max="10" value="0.7" step="0.1" disabled>
                                    <span class="control-value">0.7</span>
                                </div>
                            </div>
                            
                            <div class="filter-info">
                                üí° „Éè„Ç§„Éë„Çπ: „Ç®„Ç¢„Ç≥„É≥Èü≥„ÉªÈ¢®Âàá„ÇäÈü≥„Å™„Å©„ÅÆ‰ΩéÈü≥„Éé„Ç§„Ç∫„Çí„Ç´„ÉÉ„Éà<br>
                                üí° „É≠„Éº„Éë„Çπ: „Çµ„Éº„ÉÉ„Å®„ÅÑ„ÅÜÈ´òÈü≥„Éé„Ç§„Ç∫„Çí„Ç´„ÉÉ„Éà
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´Ôºö„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÁÆ°ÁêÜ -->
    <div class="modal" id="projectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÁÆ°ÁêÜ</h2>
                <button class="btn-close" id="closeProjectModal">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="project-list" id="projectList">
                    <!-- „Éó„É≠„Ç∏„Çß„ÇØ„Éà‰∏ÄË¶ß„ÅåË°®Á§∫„Åï„Çå„Çã -->
                </div>
            </div>
        </div>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´ÔºöÊõ∏„ÅçÂá∫„Åó -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Êõ∏„ÅçÂá∫„ÅóË®≠ÂÆö</h2>
                <button class="btn-close" id="closeExportModal">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="export-options">
                    <div class="option-group">
                        <label>„Éï„Ç°„Ç§„É´ÂΩ¢Âºè</label>
                        <select id="exportFormat" class="form-select">
                            <option value="wav">WAV (ÈùûÂúßÁ∏Æ)</option>
                            <option value="mp3">MP3 (ÂúßÁ∏Æ)</option>
                        </select>
                    </div>
                    <div class="option-group">
                        <label>„Çµ„É≥„Éó„É´„É¨„Éº„Éà</label>
                        <select id="exportSampleRate" class="form-select">
                            <option value="44100">44.1 kHz</option>
                            <option value="48000" selected>48 kHz</option>
                            <option value="96000">96 kHz</option>
                        </select>
                    </div>
                    <div class="option-group">
                        <label>„Éì„ÉÉ„Éà„Éá„Éó„Çπ</label>
                        <select id="exportBitDepth" class="form-select">
                            <option value="16">16 bit</option>
                            <option value="24" selected>24 bit</option>
                            <option value="32">32 bit float</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-success btn-large" id="startExportBtn">Êõ∏„ÅçÂá∫„ÅóÈñãÂßã</button>
            </div>
        </div>
    </div>

    <!-- „Éï„Ç°„Ç§„É´ÂÖ•ÂäõÔºàÈùûË°®Á§∫Ôºâ -->
    <input type="file" id="fileInput" multiple accept="audio/*" style="display: none;">
    
    <!-- „ÇØ„É™„ÉÉ„Éó„Ç≤„Ç§„É≥Ë™øÊï¥„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó -->
    <div class="clip-gain-popup" id="clipGainPopup" style="display: none;">
        <div class="popup-header">
            <h3 id="clipGainTitle">üéöÔ∏è „ÇØ„É™„ÉÉ„Éó„Ç≤„Ç§„É≥</h3>
            <button class="btn-close" id="closeClipGainBtn">‚úï</button>
        </div>
        <div class="popup-content">
            <div class="gain-slider-container">
                <label>„Ç≤„Ç§„É≥Ë™øÊï¥</label>
                <input type="range" id="clipGainSlider" min="-24" max="24" value="0" step="0.1">
                <span class="gain-value" id="clipGainValue">0.0 dB</span>
            </div>
            <div class="gain-info">
                <div class="info-row">
                    <span>ÁèæÂú®„ÅÆ„Éî„Éº„ÇØ:</span>
                    <span id="clipCurrentPeak" class="info-value">-- dB</span>
                </div>
                <div class="info-row">
                    <span>Ë™øÊï¥Âæå„ÅÆ„Éî„Éº„ÇØ:</span>
                    <span id="clipAdjustedPeak" class="info-value">-- dB</span>
                </div>
            </div>
            <div class="gain-presets">
                <button class="btn btn-small gain-preset-btn" data-value="0">0dB</button>
                <button class="btn btn-small gain-preset-btn" data-value="3">+3dB</button>
                <button class="btn btn-small gain-preset-btn" data-value="6">+6dB</button>
                <button class="btn btn-small gain-preset-btn" data-value="-3">-3dB</button>
                <button class="btn btn-small gain-preset-btn" data-value="-6">-6dB</button>
            </div>
        </div>
    </div>

    <script src="audioEngine.js"></script>
    <script src="projectManager.js"></script>
    <script src="historyManager.js"></script>
    <script src="trackManager.js"></script>
    <script src="fileManager.js"></script>
    <script src="effectsManager.js"></script>
    <script src="exportManager.js"></script>
    <script src="sliderUtils.js"></script>
    <script src="mobile.js"></script>
    <script src="app.js"></script>
</body>
</html>
